{% schema %}
{
  "name": "Image and Content Column",
  "tag": "section",
  "class": "split-section",
  "settings": [
    {
      "type": "text",
      "id": "custom_anchor_id",
      "label": "Custom Section ID (for Smooth Scroll)",
      "default": "image-content"
    },
    {
      "type": "checkbox",
      "id": "show_top_border",
      "label": "Show Top Border",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_bottom_border",
      "label": "Show Bottom Border",
      "default": true
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#FDFCF9",
      "info": "Leave as-is to mimic --custom-light."
    },

    /* Banner image (side) */
    {
      "type": "image_picker",
      "id": "section_image",
      "label": "Main Side Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "Image Border Radius (px)",
      "min": 0,
      "max": 50,
      "step": 1,
      "default": 0
    },

    /* Content */
    {
      "type": "text",
      "id": "overline",
      "label": "Sub text (above heading)",
      "default": "Premium Comfort"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading (use <span> for accent)",
      "default": "Why does every layer <span>feel like Love?</span>"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    },

    /* Secondary image (below description) */
    {
      "type": "image_picker",
      "id": "content_image",
      "label": "Content Image (below description)",
      "info": "Optional image that appears below the description."
    },
    {
      "type": "text",
      "id": "content_image_alt",
      "label": "Content Image Alt Text",
      "default": "Alt text"
    },
    {
      "type": "range",
      "id": "content_image_max_width",
      "label": "Content Image Max Width (px)",
      "min": 100,
      "max": 1100,
      "step": 10,
      "default": 800
    },

    /* Button */
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "See What's Inside"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button Link"
    },

    /* Spacing */
    {
      "type": "number",
      "id": "padding_top",
      "label": "Padding Top (px)",
      "default": 60
    },
    {
      "type": "number",
      "id": "padding_bottom",
      "label": "Padding Bottom (px)",
      "default": 60
    }
  ],
  "presets": [
    {
      "name": "Image and Content Column",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% assign top_border_style = '' %}
{% if section.settings.show_top_border %}
  {% assign top_border_style = 'border-top: 1px solid var(--custom-borderbg)' %}
{% endif %}

{% assign bottom_border_style = '' %}
{% if section.settings.show_bottom_border %}
  {% assign bottom_border_style = 'border-bottom: 1px solid var(--custom-borderbg)' %}
{% endif %}

<div
  {% if section.settings.custom_anchor_id %}
    id="{{ section.settings.custom_anchor_id | escape }}"
  {% endif %}
  class="split-section{% if section.settings.image_position == 'right' %} split-section--reverse{% endif %}"
  style="
    {{ top_border_style }}; {{ bottom_border_style }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
    --split-content-img-max-width: {{ section.settings.content_image_max_width | default: 800 }}px;
    --split-border-radius: {{ section.settings.image_border_radius | default: 0 }}px;
  "
>
  <div class="split__image-col">
    {% if section.settings.section_image != blank %}
      <img
        src="{{ section.settings.section_image | image_url: width: 1600 }}"
        alt="{{ section.settings.heading | strip_html }}"
        width="1600"
        height="auto"
        loading="lazy"
        class="split__img"
      >
    {% endif %}
  </div>

  <div class="split__text-col">
    <div class="split__text-inner">
      {% if section.settings.overline != blank %}
        <div class="split__overline">{{ section.settings.overline }}</div>
      {% endif %}

      <h2 class="h2 split__heading font-cursive">
        {{ section.settings.heading }}
      </h2>

      {% if section.settings.description != blank %}
        <div class="split__desc">{{ section.settings.description }}</div>
      {% endif %}

      {% if section.settings.content_image != blank %}
        <div class="split__content-image-wrap">
          <img
            src="{{ section.settings.content_image | image_url: width: 1400 }}"
            alt="{{ section.settings.content_image_alt | default: section.settings.heading | strip_html }}"
            width="1400"
            height="auto"
            loading="lazy"
            class="split__content-image"
          >
        </div>
      {% endif %}

      {% if section.settings.button_label != blank and section.settings.button_url != blank %}
        <a href="{{ section.settings.button_url }}" class="split__btn">
          {{ section.settings.button_label }}
          <span class="split__btn-arrow">â€º</span>
        </a>
      {% endif %}
    </div>
  </div>
</div>

<style>
/* Base */
.split-section {
  width: 100vw;
  display: flex;
  flex-direction: row;
  justify-content: stretch;
  align-items: stretch;
  transition: padding 0.2s, background-color 0.2s;
  font-family: inherit; /* Dawn default */
}
.split-section--reverse { flex-direction: row-reverse; }

.split__image-col {
  flex: 1 1 50%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  min-height: 650px;
  max-height: 650px;
  overflow: hidden;
}

/* Banner (side) image */
.split__img {
  width: 100%;
  height: 100%;
  max-height: 650px;
  object-fit: cover;
  object-position: center;
  display: block;
  border-radius: 0 var(--split-border-radius) var(--split-border-radius) 0;
}
.split-section--reverse .split__img {
  border-radius: var(--split-border-radius) 0 0 var(--split-border-radius);
}

.split__text-col {
  flex: 1 1 50%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}
.split__text-inner {
  width: 100%;
  max-width: 800px;
  margin: 0 0 0 7vw;
  padding: 4vw 3vw 4vw 0;
  box-sizing: border-box;
}
.split-section--reverse .split__text-inner {
  margin: 0 7vw 0 0;
  padding: 4vw 0 4vw 3vw;
}

/* Overline */
.split__overline {
  color: var(--custom-dark);
  letter-spacing: 0.06em;
  font-size: 0.9em;
  line-height: 1.2;
  margin-bottom: 0.6rem;
}

/* Heading */
.split__heading {
  color: var(--custom-dark);
  margin-bottom: 1.1rem;
  margin-top: 1.1rem;
  line-height: 1.13;
  font-weight: 400;
}

/* Description */
.split__desc {
  color: var(--custom-dark);
  opacity: 0.93;
  margin-bottom: 1.4rem;
  line-height: 1.6;
}

/* Content image */
.split__content-image-wrap { margin: 1.6rem 0 2.1rem; }
.split__content-image {
  display: block;
  width: 100%;
  max-width: var(--split-content-img-max-width);
  height: auto;
  object-fit: contain;
}

/* Button */
.split__btn {
  display: inline-flex;
  align-items: center;
  background: transparent;
  color: var(--custom-dark);
  font-weight: 500;
  padding: 1.1rem 2.3rem;
  border: 1px solid var(--custom-dark);
  min-width: 260px;
  text-decoration: none;
  cursor: pointer;
  border-radius: 0;
}
.split__btn-arrow { margin-left: 0.8em; font-size: 1.3em; }
.split__btn:hover {
  background: var(--custom-primary);
  color: var(--custom-dark);
  border-color: var(--custom-primary);
}

/* Breakpoints */
@media (max-width: 990px) {
  .split-section { 
    flex-direction: column !important; 
  }
  .split__image-col,
  .split__text-col { 
    flex: 0 0 100%; 
    min-height: 350px; 
  }
  .split__image-col { max-height: 500px; }
  .split__img { border-radius: 0 !important; }
  .split__text-inner {
    margin: 0;
    padding: 6vw 6vw;
    text-align: center;
    max-width: 100%;
  }
}
@media (max-width: 749px) {
  .split__text-inner { padding: 7vw 2rem; } /* adjusted */
  .split__btn { min-width: 180px; padding: 1rem 1.6rem; }
  .split__image-col { max-height: 450px; }
}
@media (max-width: 479px) {
  .split__text-inner { padding: 7vw 1.5rem; } /* adjusted */
  .split__btn { min-width: 140px; padding: 0.7rem 1.2rem; }
  .split__image-col { max-height: 400px; }
}
</style>
