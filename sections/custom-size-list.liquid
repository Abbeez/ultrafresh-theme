{% schema %}
{
  "name": "Sizes List Section",
  "tag": "section",
  "class": "sizes-list-section",
  "settings": [
    {
      "type": "text",
      "id": "custom_anchor_id",
      "label": "Custom Section ID (for Smooth Scroll)",
      "default": "sizes-list"
    },
    {
      "type": "checkbox",
      "id": "show_top_border",
      "label": "Show Top Border",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_bottom_border",
      "label": "Show Bottom Border",
      "default": true
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#FDFCF9",
      "info": "Leave as-is to mimic --custom-light."
    },

    /* Banner image (side) */
    {
      "type": "image_picker",
      "id": "section_image",
      "label": "Main Side Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "Image Border Radius (px)",
      "min": 0,
      "max": 50,
      "step": 1,
      "default": 0
    },

    /* Content */
    {
      "type": "text",
      "id": "overline",
      "label": "Sub text (above heading)",
      "default": "Perfect Fit"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading (use <span> for accent)",
      "default": "Find your <span>perfect size</span>"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Our comprehensive size range ensures the perfect fit for every body type. From newborn to toddler, we've got you covered with accurate measurements and comfortable fits.</p>"
    },

    /* Button */
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "View Size Guide"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show Button",
      "default": true
    },

    /* Spacing */
    {
      "type": "number",
      "id": "padding_top",
      "label": "Padding Top (px)",
      "default": 60
    },
    {
      "type": "number",
      "id": "padding_bottom",
      "label": "Padding Bottom (px)",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "size_item",
      "name": "Size Item",
      "settings": [
        {
          "type": "text",
          "id": "size_text",
          "label": "Size Text",
          "default": "Newborn (6-9 lbs)"
        },
        {
          "type": "color",
          "id": "dot_color",
          "label": "Dot Color",
          "default": "#D4A574"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Sizes List Section",
      "category": "Custom",
      "blocks": [
        {
          "type": "size_item",
          "settings": {
            "size_text": "Newborn (6-9 lbs)",
            "dot_color": "#D4A574"
          }
        },
        {
          "type": "size_item",
          "settings": {
            "size_text": "Size 1 (8-14 lbs)",
            "dot_color": "#D4A574"
          }
        },
        {
          "type": "size_item",
          "settings": {
            "size_text": "Size 2 (12-18 lbs)",
            "dot_color": "#D4A574"
          }
        },
        {
          "type": "size_item",
          "settings": {
            "size_text": "Size 3 (16-28 lbs)",
            "dot_color": "#D4A574"
          }
        },
        {
          "type": "size_item",
          "settings": {
            "size_text": "Size 4 (22-37 lbs)",
            "dot_color": "#D4A574"
          }
        },
        {
          "type": "size_item",
          "settings": {
            "size_text": "Size 5 (27+ lbs)",
            "dot_color": "#D4A574"
          }
        }
      ]
    }
  ]
}
{% endschema %}

{% assign top_border_style = '' %}
{% if section.settings.show_top_border %}
  {% assign top_border_style = 'border-top: 1px solid var(--custom-borderbg)' %}
{% endif %}

{% assign bottom_border_style = '' %}
{% if section.settings.show_bottom_border %}
  {% assign bottom_border_style = 'border-bottom: 1px solid var(--custom-borderbg)' %}
{% endif %}

<div
  {% if section.settings.custom_anchor_id %}
    id="{{ section.settings.custom_anchor_id | escape }}"
  {% endif %}
  class="sizes-list-section{% if section.settings.image_position == 'right' %} sizes-list-section--reverse{% endif %}"
  style="
    {{ top_border_style }}; {{ bottom_border_style }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
    --sizes-border-radius: {{ section.settings.image_border_radius | default: 0 }}px;
  "
>
  <div class="sizes__image-col">
    {% if section.settings.section_image != blank %}
      <img
        src="{{ section.settings.section_image | image_url: width: 1600 }}"
        alt="{{ section.settings.heading | strip_html }}"
        width="1600"
        height="auto"
        loading="lazy"
        class="sizes__img"
      >
    {% endif %}
  </div>

  <div class="sizes__text-col">
    <div class="sizes__text-inner">
      {% if section.settings.overline != blank %}
        <div class="sizes__overline">{{ section.settings.overline }}</div>
      {% endif %}

      <h2 class="h1 sizes__heading font-cursive">
        {{ section.settings.heading }}
      </h2>

      {% if section.settings.description != blank %}
        <div class="sizes__desc">{{ section.settings.description }}</div>
      {% endif %}

      {% if section.blocks.size > 0 %}
        <div class="sizes__list-wrapper">
          {% for block in section.blocks %}
            <div class="sizes__list-item" {{ block.shopify_attributes }}>
              <span class="sizes__list-dot" style="background-color: {{ block.settings.dot_color }};"></span>
              <span class="sizes__list-text">{{ block.settings.size_text }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {% if section.settings.show_button and section.settings.button_text != blank %}
        <div class="sizes__button-wrapper">
          <a href="{{ section.settings.button_url | default: '#' }}" class="sizes__btn">
            {{ section.settings.button_text }}
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>

<style>
/* Base */
.sizes-list-section {
  width: 100vw;
  display: flex;
  flex-direction: row;
  justify-content: stretch;
  align-items: stretch;
  transition: padding 0.2s, background-color 0.2s;
  font-family: inherit; /* Dawn default */
}
.sizes-list-section--reverse { flex-direction: row-reverse; }

.sizes__image-col {
  flex: 1 1 50%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  min-height: 650px;
  max-height: 650px;
  overflow: hidden;
}

/* Banner (side) image: responsive with dynamic border radius */
.sizes__img {
  width: 100%;
  height: 100%;
  max-height: 650px;
  object-fit: cover;
  object-position: center;
  display: block;
  /* Default: left position gets top-right & bottom-right radius */
  border-radius: 0 var(--sizes-border-radius) var(--sizes-border-radius) 0;
}
/* When image is on right: top-left & bottom-left radius */
.sizes-list-section--reverse .sizes__img {
  border-radius: var(--sizes-border-radius) 0 0 var(--sizes-border-radius);
}

.sizes__text-col {
  flex: 1 1 50%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}
.sizes__text-inner {
  width: 100%;
  max-width: 800px;
  margin: 0 0 0 7vw;
  padding: 4vw 3vw 4vw 0;
  box-sizing: border-box;
}
.sizes-list-section--reverse .sizes__text-inner {
  margin: 0 7vw 0 0;
  padding: 4vw 0 4vw 3vw;
}

/* Overline / sub text */
.sizes__overline {
  color: var(--custom-dark);
  letter-spacing: 0.06em;
  text-transform: none;
  font-size: 0.9em; /* 90% */
  line-height: 1.2;
  margin-bottom: 0.6rem;
}

/* Heading */
.sizes__heading {
  color: var(--custom-dark);
  margin-bottom: 1.1rem;
  margin-top: 1.1rem;
  line-height: 1.13;
  font-weight: 400; /* normal */
}

/* Description */
.sizes__desc {
  color: var(--custom-dark);
  opacity: 0.93;
  margin-bottom: 1.4rem;
  line-height: 1.6;
}

/* Sizes List */
.sizes__list-wrapper {
  display: flex;
  {% comment %} grid-template-columns: 1fr 1fr; {% endcomment %}
  gap: 1.2rem 2rem;
  margin-top: 2rem;
  flex-wrap: wrap;
  justify-content: flex-start;
}

.sizes__list-item {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  flex-grow:1;
  width:45%;
  font-size:90%;
}

.sizes__list-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
}

.sizes__list-text {
  color: var(--custom-dark);
  font-size: 1em;
  line-height: 1.4;
  font-weight: 400;
}

/* Button */
.sizes__button-wrapper {
  margin-top: 2.5rem;
}

.sizes__btn {
  display: inline-flex;
  align-items: center;
  background: transparent;
  color: var(--custom-dark);
  font-weight: 500;
  padding: 1.1rem 2.3rem;
  border: 1px solid var(--custom-dark);
  min-width: 260px;
  text-decoration: none;
  cursor: pointer;
  border-radius: 0;
  text-align: center;
  justify-content: center;
  transition: background-color 0.2s, color 0.2s;
}

.sizes__btn:hover {
  background-color: var(--custom-dark);
  color: var(--custom-light, #fff);
  text-decoration: none;
}

/* Breakpoints: 990 / 749 / 479 */
@media (max-width: 990px) {
  .sizes-list-section { 
    flex-direction: column !important; 
  }
  .sizes__image-col,
  .sizes__text-col { 
    flex: 0 0 100%; 
    min-height: 350px; 
  }
  .sizes__image-col {
    max-height: 500px;
  }
  .sizes__img { 
    object-position: center;
    height: 100%;
    /* Reset border radius on mobile */
    border-radius: 0 !important;
  }
  .sizes__text-inner {
    margin: 0;
    padding: 6vw 6vw;
    text-align: center;
    max-width: 880px;
  }
  .sizes__list-wrapper {
    justify-items: center;
  }

  .sizes__list-item {
  text-align: center;
  justify-content: center;
  border: 1px solid #e0e0e0;
  padding: 0.8rem 1rem;
  border-radius:8px;
}
}
@media (max-width: 749px) {
  .sizes__text-inner { padding: 7vw 5rem; }
  .sizes__image-col {
    max-height: 450px;
  }
  .sizes__list-wrapper {
    grid-template-columns: 1fr;
    gap: 1rem;
    text-align: left;
  }
  .sizes__btn {
    min-width: 220px;
    padding: 1rem 2rem;
  }
}
@media (max-width: 479px) {
  .sizes__text-inner { padding: 7vw 3rem; }
  .sizes__image-col {
    max-height: 400px;
  }
  .sizes__btn {
    min-width: 200px;
    padding: 0.9rem 1.5rem;
  }
}
</style>