{% schema %}
{
  "name": "Custom Page Header",
  "settings": [
    {
      "type": "header",
      "content": "Main Content"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Your Amazing Headline Here"
    },
    {
      "type": "textarea",
      "id": "subheadline",
      "label": "Subheadline",
      "default": "A compelling subheadline that describes your product or service."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button Link"
    },

    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },

    {
      "type": "header",
      "content": "Spacing Settings"
    },
    {
      "type": "text",
      "id": "padding_top",
      "label": "Padding Top (%)",
      "default": "10"
    },
    {
      "type": "text",
      "id": "padding_bottom",
      "label": "Padding Bottom (%)",
      "default": "10"
    },

    {
      "type": "header",
      "content": "Background Settings"
    },
    {
      "type": "image_picker",
      "id": "page_header_image",
      "label": "Background Image"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color (fallback or overlay)",
      "default": "#f8f9fa"
    },
    {
      "type": "range",
      "id": "background_opacity",
      "label": "Background Color Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 0,
      "info": "Overlay opacity when using background image"
    },

    {
      "type": "header",
      "content": "Text Settings"
    },
    {
      "type": "select",
      "id": "text_color",
      "label": "Text color",
      "options": [
        { "value": "light", "label": "Light" },
        { "value": "dark", "label": "Dark" }
      ],
      "default": "light"
    },
    {
      "type": "checkbox",
      "id": "enable_text_shadow",
      "label": "Enable Text Shadow",
      "default": true,
      "info": "Adds shadow to text for better readability over images"
    }
  ],
  "presets": [
    {
      "name": "Custom Page Header"
    }
  ]
}
{% endschema %}

{% assign has_page_header_image = section.settings.page_header_image %}
{% assign bg_opacity = section.settings.background_opacity | divided_by: 100.0 %}

<div 
  class="custom-page-header custom-page-header--{{ section.settings.text_color }} custom-page-header--align-{{ section.settings.text_alignment }} {% if section.settings.enable_text_shadow %}custom-page-header--text-shadow{% endif %}"
  style="
    padding-top: {{ section.settings.padding_top | default: 10 }}%;
    padding-bottom: {{ section.settings.padding_bottom | default: 10 }}%;
    {% if section.settings.background_color != blank %}
      background-color: {{ section.settings.background_color }};
    {% endif %}
    {% if has_page_header_image != blank and section.settings.background_opacity > 0 %}
      background-image:
        linear-gradient(
          rgba({{ section.settings.background_color | color_extract: 'red' }}, {{ section.settings.background_color | color_extract: 'green' }}, {{ section.settings.background_color | color_extract: 'blue' }}, {{ bg_opacity }}),
          rgba({{ section.settings.background_color | color_extract: 'red' }}, {{ section.settings.background_color | color_extract: 'green' }}, {{ section.settings.background_color | color_extract: 'blue' }}, {{ bg_opacity }})
        ),
        url('{{ has_page_header_image | image_url: width: 2000 }}');
    {% elsif has_page_header_image != blank %}
      background-image: url('{{ has_page_header_image | image_url: width: 2000 }}');
    {% endif %}
  "
>
  <div class="page-width">
    <div class="custom-page-header__content">
      <h1 class="h1 custom-page-header__headline font-cursive">{{ section.settings.headline }}</h1>
      {% if section.settings.subheadline != blank %}
        <div class="custom-page-header__subheadline">{{ section.settings.subheadline }}</div>
      {% endif %}
      {% if section.settings.button_label != blank and section.settings.button_url != blank %}
        <a href="{{ section.settings.button_url }}" class="custom-page-header__btn">
          {{ section.settings.button_label }}
          <span class="custom-page-header__btn-arrow">â€º</span>
        </a>
      {% endif %}
    </div>
  </div>
</div>

<style>
.custom-page-header {
  position: relative;
  width: 100vw;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  overflow: hidden;
  min-height: 30vh;
}

.custom-page-header .page-width {
  position: relative;
  z-index: 2;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.custom-page-header__content {
  max-width: 1050px;
  padding-left: 2rem;
  padding-right: 2rem;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
  word-break: break-word;
  width: 100%;
}

/* Text Alignment Options */
.custom-page-header--align-left .custom-page-header__content {
  text-align: left;
  margin-left: 0;
  margin-right: auto;
}
.custom-page-header--align-center .custom-page-header__content {
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
.custom-page-header--align-right .custom-page-header__content {
  text-align: right;
  margin-left: auto;
  margin-right: 0;
}

.custom-page-header__headline {
  margin-bottom: 1.5rem;
  margin-top: 0;
  color: var(--custom-light);
  word-break: break-word;
}
.custom-page-header--text-shadow .custom-page-header__headline {
  text-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
}
.custom-page-header--dark .custom-page-header__headline {
  color: var(--custom-dark);
}

.custom-page-header__subheadline {
  opacity: 0.95;
  margin-bottom: 2rem;
  color: var(--custom-light);
  word-break: break-word;
}
.custom-page-header--text-shadow .custom-page-header__subheadline {
  text-shadow: 0 3px 20px rgba(0, 0, 0, 0.4);
}
.custom-page-header--dark .custom-page-header__subheadline {
  color: var(--custom-dark);
}

.custom-page-header__btn {
  display: inline-flex;
  align-items: center;
  background: var(--custom-primary);
  color: var(--custom-dark);
  border: none;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  padding: 1.2rem 2.5rem;
  text-decoration: none;
  cursor: pointer;
  min-width: 200px;
  justify-content: center;
  border-radius: 0;
  transition: all 0.3s ease;
}
.custom-page-header__btn-arrow {
  margin-left: 0.8em;
  line-height: 1;
}
.custom-page-header__btn:hover,
.custom-page-header__btn:focus {
  background: var(--custom-secondary);
  color: var(--custom-light);
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
}
.custom-page-header--dark .custom-page-header__btn {
  background: var(--custom-dark);
  color: var(--custom-light);
}
.custom-page-header--dark .custom-page-header__btn:hover,
.custom-page-header--dark .custom-page-header__btn:focus {
  background: var(--custom-secondary);
  color: var(--custom-light);
}

{% comment %} {% if template == 'index' %} {% endcomment %}
    @media only screen and (max-width: 600px) {
      .custom-page-header{
      padding-top: 20% !important;
      padding-bottom: 15% !important;
    }
  }
{% comment %} {% endif %} {% endcomment %}
</style>
